(this["webpackJsonpstore-anaya-jorge"]=this["webpackJsonpstore-anaya-jorge"]||[]).push([[0],{221:function(e,t){},223:function(e,t){},233:function(e,t){},235:function(e,t){},260:function(e,t){},262:function(e,t){},263:function(e,t){},269:function(e,t){},271:function(e,t){},289:function(e,t){},291:function(e,t){},303:function(e,t){},306:function(e,t){},311:function(e,t){},313:function(e,t){},336:function(e,t){},431:function(e,t,c){"use strict";c.r(t);var a=c(0),s=c(1),n=c.n(s),r=c(198),o=c.n(r),i=c(9),l=c(23),d=c(31),j=n.a.createContext();function b(e){var t=e.children,c=Object(s.useState)([]),n=Object(d.a)(c,2),r=n[0],o=n[1],i=Object(s.useState)([]),l=Object(d.a)(i,2),b=l[0],u=l[1],p=Object(s.useState)(!0),h=Object(d.a)(p,2),m=h[0],O=h[1],x=Object(s.useState)(!1),f=Object(d.a)(x,2),g=f[0],N=f[1],y=Object(s.useState)(0),v=Object(d.a)(y,2),C=v[0],I=v[1],M=Object(s.useState)("0"),w=Object(d.a)(M,2),k=w[0],U=w[1],A=Object(s.useState)("0"),T=Object(d.a)(A,2),J=T[0],L=T[1],R=Object(s.useState)([]),z=Object(d.a)(R,2),P=z[0],S=z[1];return Object(a.jsx)(j.Provider,{value:{productsResponse:r,setProductsResponse:o,userResponse:b,setUserResponse:u,isLoading:m,setIsLoading:O,isUserUpdated:g,setIsUserUpdated:N,sortBy:C,setSortBy:I,priceFilter:k,setPriceFilter:U,categoryFilter:J,setCategoryFilter:L,categoryList:P,setCategoryList:S},children:t})}var u=function(e){var t=n.a.useContext(j),s=t.userResponse,r=t.setIsUserUpdated,o=s.name,i=s.points,d=function(e){c(114)({method:"POST",url:"https://coding-challenge-api.aerolab.co/user/points",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1Zjk1ZDVjYjUyNDk2NzAwMTlhMTBlYjEiLCJpYXQiOjE2MDM2NTUxMTV9.W32_e_L9EGOptAWQ7VCA_PFIz4-z7D52nNipYXQ3-rI"},body:'{"amount": '.concat(e,"}")},(function(e,t,c){console.log("Status:",t.statusCode),console.log("Headers:",JSON.stringify(t.headers)),console.log("Response:",c)})),r(!1)};return Object(a.jsx)("header",{children:Object(a.jsx)("div",{className:"navbar navbar-light bg-light box-shadow",children:Object(a.jsxs)("div",{className:"container d-flex justify-content-between",children:[Object(a.jsx)(l.b,{to:"/",children:Object(a.jsx)("i",{className:"fas fa-shopping-cart"})}),Object(a.jsxs)("div",{className:"dropdown d-flex",children:[Object(a.jsxs)("h3",{className:"nav-item my-auto user-info",children:[o," ",Object(a.jsx)("i",{className:"fas fa-coins"})," ",i," "]}),Object(a.jsx)("button",{className:"btn btn-secondary plus-btn",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:Object(a.jsx)("i",{className:"fas fa-plus-circle"})}),Object(a.jsx)(l.b,{to:"/history",children:Object(a.jsx)("button",{className:"btn btn-secondary",children:Object(a.jsx)("i",{className:"fas fa-clipboard"})})}),Object(a.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton",children:[Object(a.jsxs)("button",{className:"dropdown-item",onClick:function(){return d(1e3)},children:["Add ",Object(a.jsx)("i",{className:"fas fa-coins"})," 1000 points"]}),Object(a.jsxs)("button",{className:"dropdown-item",onClick:function(){return d(5e3)},children:["Add ",Object(a.jsx)("i",{className:"fas fa-coins"})," 5000 points"]}),Object(a.jsxs)("button",{className:"dropdown-item",onClick:function(){return d(7500)},children:["Add ",Object(a.jsx)("i",{className:"fas fa-coins"})," 7500 points"]})]})]})]})})})};var p=function(e){return Object(a.jsx)("footer",{className:"navbar navbar-light bg-light box-shadow justify-content-center",children:"Jorge Anaya 2020"})};var h=function(e){var t=n.a.useContext(j).userResponse.redeemHistory,c=!1;try{c=Boolean(t.length>=1)}catch(s){c=!1}return Object(a.jsx)("div",{className:"container",children:c?Object(a.jsxs)("table",{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"col",children:"#"}),Object(a.jsx)("th",{scope:"col",children:"ProductId"}),Object(a.jsx)("th",{scope:"col",children:"Date"})]})}),Object(a.jsx)("tbody",{children:t.map((function(e,t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"row",children:t+1}),Object(a.jsx)("td",{children:e.productId}),Object(a.jsx)("td",{children:e.createDate})]},t)}))})]}):Object(a.jsx)("h1",{children:"No hay compras en el historial"})})};var m=function(e){var t=n.a.useContext(j),c=t.sortBy,s=t.setSortBy;return Object(a.jsx)("div",{className:"container filter",children:Object(a.jsxs)("div",{className:"btn-toolbar justify-content-center",role:"toolbar","aria-label":"Toolbar with button groups",children:[Object(a.jsx)("p",{className:"text-secondary my-auto p-custom",children:"Sort by: "}),Object(a.jsx)("div",{className:"btn-group mr-2",role:"group","aria-label":"First group",children:Object(a.jsx)("button",{onClick:function(){return s(0)},type:"button",className:0===c?"btn btn-primary":"btn btn-secondary",children:"Most Recent"})}),Object(a.jsx)("div",{className:"btn-group mr-2",role:"group","aria-label":"Second group",children:Object(a.jsx)("button",{onClick:function(){return s(1)},type:"button",className:1===c?"btn btn-primary":"btn btn-secondary",children:"Lowest Price"})}),Object(a.jsx)("div",{className:"btn-group",role:"group","aria-label":"Third group",children:Object(a.jsx)("button",{onClick:function(){return s(2)},type:"button",className:2===c?"btn btn-primary":"btn btn-secondary",children:"Highest Price"})})]})})};var O=function(e){var t=n.a.useContext(j),c=t.setPriceFilter,s=t.setCategoryFilter,r=t.categoryList;return Object(a.jsx)("div",{className:"container filter",children:Object(a.jsxs)("div",{className:"btn-toolbar justify-content-center",role:"toolbar","aria-label":"Toolbar with button groups",children:[Object(a.jsx)("p",{className:"text-primary my-auto p-custom filterp",children:"Filter by Price: "}),Object(a.jsxs)("select",{onChange:function(e){c(e.target.value)},className:"browser-default",name:"price",children:[Object(a.jsx)("option",{value:"0",children:"All prices"}),Object(a.jsx)("option",{value:"1",children:"Prices from 0 to 150"}),Object(a.jsx)("option",{value:"2",children:"Prices from 151 to 230"}),Object(a.jsx)("option",{value:"3",children:"Prices from 230 to 600"}),Object(a.jsx)("option",{value:"4",children:"Prices higher than 600"})]}),Object(a.jsx)("p",{className:"text-primary my-auto p-custom filterp",children:"Filter by Category: "}),Object(a.jsxs)("select",{onChange:function(e){s(e.target.value)},className:"browser-default",name:"category",children:[Object(a.jsx)("option",{value:"0",children:"All categories"}),r.map((function(e,t){return Object(a.jsx)("option",{value:t+1,children:e},t)}))]})]})})},x=c(200);var f=function(e){var t=n.a.useContext(j),s=t.userResponse,r=t.setIsUserUpdated,o=e.category,i=e.name,l=e.imgURL,d=e.cost,b=e.productId,u=s.points,p=function(e,t){!0===e&&(c(114)({method:"POST",url:"https://coding-challenge-api.aerolab.co/redeem",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1Zjk1ZDVjYjUyNDk2NzAwMTlhMTBlYjEiLCJpYXQiOjE2MDM2NTUxMTV9.W32_e_L9EGOptAWQ7VCA_PFIz4-z7D52nNipYXQ3-rI"},body:'{  "productId": "'.concat(t,'"}')},(function(e,t,c){console.log("Status:",t.statusCode),console.log("Headers:",JSON.stringify(t.headers)),console.log("Response:",c)})),r(!1))};return Object(a.jsxs)("div",{className:"col-md-6 col-lg-3 card-container",children:[Object(a.jsxs)("div",{className:"card",children:[Object(a.jsx)("img",{src:l,className:"card-img-top",alt:"..."}),Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("h5",{className:"card-title",children:i}),Object(a.jsxs)("p",{className:"card-text",children:[d," ",Object(a.jsx)("i",{className:"fas fa-coins"})]}),Object(a.jsx)("p",{className:"card-text",children:Object(a.jsx)("small",{className:"text-muted",children:o})}),u>=d?Object(a.jsx)("button",{onClick:function(){return p(!0,b)},className:"btn btn-primary","data-toggle":"modal","data-target":"#successModal",children:"Buy"}):Object(a.jsxs)("button",{onClick:function(){return p(!1)},className:"btn btn-danger","data-toggle":"modal","data-target":"#failureModal",children:["You lack ",d-u," points"]})]})]}),Object(a.jsx)("div",{className:"modal fade",id:"successModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(a.jsx)("div",{className:"modal-dialog",role:"document",children:Object(a.jsxs)("div",{className:"modal-content",children:[Object(a.jsxs)("div",{className:"modal-header",children:[Object(a.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Redeemed Success"}),Object(a.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(a.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(a.jsx)("div",{className:"modal-body",children:"You successfully redeemed the product"}),Object(a.jsx)("div",{className:"modal-footer",children:Object(a.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"})})]})})}),Object(a.jsx)("div",{className:"modal fade",id:"failureModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(a.jsx)("div",{className:"modal-dialog",role:"document",children:Object(a.jsxs)("div",{className:"modal-content",children:[Object(a.jsxs)("div",{className:"modal-header",children:[Object(a.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Redeemed Failure"}),Object(a.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(a.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(a.jsx)("div",{className:"modal-body",children:"You can not redeem that product. Not enough points."}),Object(a.jsx)("div",{className:"modal-footer",children:Object(a.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"})})]})})})]})};var g=function(e){var t=n.a.useContext(j),c=t.productsResponse,s=t.sortBy,r=t.priceFilter,o=t.categoryFilter,i=t.categoryList,l=e.pageNumber,d=Object(x.a)(c);if("0"!==r)switch(r){case"1":d=d.filter((function(e){return e.cost>0&&e.cost<=150}));break;case"2":d=d.filter((function(e){return e.cost>150&&e.cost<=230}));break;case"3":d=d.filter((function(e){return e.cost>230&&e.cost<=600}));break;case"4":d=d.filter((function(e){return e.cost>600}))}return"0"!==o&&(d=d.filter((function(e){return e.category===i[o-1]}))),1===s&&d.sort((function(e,t){return e.cost>t.cost?1:-1})),2===s&&d.sort((function(e,t){return e.cost<t.cost?1:-1})),d.length>16&&(d="1"===l?d.slice(0,16):d.slice(16,d.length)),Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("div",{className:"row",children:d.length?d.map((function(e,t){return Object(a.jsx)(f,{category:e.category,name:e.name,imgURL:e.img.url,cost:e.cost,productId:e._id},t)})):Object(a.jsx)("h2",{children:"No products matched your filters"})})})};var N=function(e){var t=n.a.useContext(j),c=t.priceFilter,s=t.categoryFilter,r=e.pageNumber;return Object(a.jsx)("div",{className:"container pagination",children:Object(a.jsx)("nav",{"aria-label":"Page navigation example",children:"0"===c&&"0"===s?"1"===r?Object(a.jsxs)("ul",{className:"pagination",children:[Object(a.jsx)(l.b,{to:"/page/1",children:Object(a.jsx)("li",{className:"page-item disabled",children:Object(a.jsx)("p",{className:"page-link",children:Object(a.jsx)("i",{className:"fas fa-arrow-left"})})})}),Object(a.jsx)(l.b,{to:"/page/2",children:Object(a.jsx)("li",{className:"page-item",children:Object(a.jsx)("p",{className:"page-link",children:Object(a.jsx)("i",{className:"fas fa-arrow-right"})})})})]}):Object(a.jsxs)("ul",{className:"pagination",children:[Object(a.jsx)(l.b,{to:"/page/1",children:Object(a.jsx)("li",{className:"page-item",children:Object(a.jsx)("p",{className:"page-link",children:Object(a.jsx)("i",{className:"fas fa-arrow-left"})})})}),Object(a.jsx)(l.b,{to:"/page/2",children:Object(a.jsx)("li",{className:"page-item disabled",children:Object(a.jsx)("p",{className:"page-link",children:Object(a.jsx)("i",{className:"fas fa-arrow-right"})})})})]}):""})})};var y=function(e){var t=e.pageNumber;return Object(a.jsxs)("div",{children:[Object(a.jsx)(m,{}),Object(a.jsx)(O,{}),Object(a.jsx)(N,{pageNumber:t}),Object(a.jsx)(g,{pageNumber:t})]})};var v=function(){var e=n.a.useContext(j),t=e.productsResponse,c=e.setProductsResponse,r=e.setUserResponse,o=e.setIsLoading,l=e.isUserUpdated,d=e.setIsUserUpdated,b=e.setCategoryList;return Object(s.useEffect)((function(){o(!0),fetch("https://coding-challenge-api.aerolab.co/products",{method:"GET",headers:new Headers({ContentType:"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1Zjk1ZDVjYjUyNDk2NzAwMTlhMTBlYjEiLCJpYXQiOjE2MDM2NTUxMTV9.W32_e_L9EGOptAWQ7VCA_PFIz4-z7D52nNipYXQ3-rI"})}).then((function(e){return e.json()})).then((function(e){c(e),o(!1)})).catch((function(e){return console.log(e)}))}),[]),Object(s.useEffect)((function(){var e=[];t.forEach((function(t){e.includes(t.category)||e.push(t.category)})),b(e)}),[t]),Object(s.useEffect)((function(){o(!0),fetch("https://coding-challenge-api.aerolab.co/user/me",{method:"GET",headers:new Headers({ContentType:"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1Zjk1ZDVjYjUyNDk2NzAwMTlhMTBlYjEiLCJpYXQiOjE2MDM2NTUxMTV9.W32_e_L9EGOptAWQ7VCA_PFIz4-z7D52nNipYXQ3-rI"})}).then((function(e){return e.json()})).then((function(e){r(e),o(!1),d(!0)})).catch((function(e){return console.log(e)}))}),[l]),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(u,{}),Object(a.jsxs)(i.c,{children:[Object(a.jsx)(i.a,{exact:!0,path:"/",render:function(){return Object(a.jsx)(y,{pageNumber:"1"})}}),Object(a.jsx)(i.a,{path:"/page/:pageNumber",render:function(e){var t=e.match;return Object(a.jsx)(y,{pageNumber:t.params.pageNumber})}}),Object(a.jsx)(i.a,{exact:!0,path:"/history",render:function(){return Object(a.jsx)(h,{})}})]}),Object(a.jsx)(p,{})]})};o.a.render(Object(a.jsx)(l.a,{children:Object(a.jsx)(n.a.StrictMode,{children:Object(a.jsx)(b,{children:Object(a.jsx)(v,{})})})}),document.getElementById("root"))}},[[431,1,2]]]);
//# sourceMappingURL=main.682615bc.chunk.js.map